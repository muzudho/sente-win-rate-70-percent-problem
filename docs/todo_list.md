# TODO リスト

* [-] ｎ番勝負と裏のｍ勝先取の比が同じになる計算はスキップしたい ----> 廃止
* [x] ［表勝ちだけでの対局数］と、［裏勝ちだけでの対局数］に、共通の軸での価値を付けれるか？ ----> 通分を使う
* [x] `new_p` は `best_p` へ名称変更
* [x] CSV には、 `best_p` だけではなく、`latest_p` も保存しておきたい
* [x] 推奨するデータの p や誤差は、実際値ではなく、理論値にしたい
* [x] p=0.93 より上は探索に時間がかかるから省きたい。 p=0.99 とか、p=0.50～0.98 の探索時間の合計より時間かかる。 p=0.95 までは探索するか？ ----> 0.95 を上限にした
* [ ] get_step_by() の challenged=FAILED は廃止したい
* [ ] コイン投げで引き分けがあるとどうなる？
    * [-] タイブレークを導入するか？ ----> ［将棋の引分け率］が上がればあがるほど、引き分けを勝ちにされた方が有利になってしまう
    * [ ] 勝ち点のスケールを２倍にしておいて、引分けになったら両者に勝ち点の半分が入るようにしたらどうか？
    * [ ] 引分けを加味した理論値はまだ造れてないから、generate は Frozen の failure_rate=0 にしか使えないのでは？ failure_rate を 0 以外にしたら、ローラーで探すべきでは？
    * [ ] 引分け時だけでなく、通常の［勝ち点］も、 failure_rate を踏まえて算出する必要があるのでは？
    * [ ] ［上限対局数］も、引き分けを考慮する前と、考慮したあとの内訳が見たい（［引き分け考慮前の対局数］の追加）
* [x] シリーズの中の１局を bout と呼ぶのを止めて、刻（こく；tick）に名称変更するか？ 2 刻（ticks） で 1 局（game） とか。分局とか。部局（department）とか。小局（こきょく；microgame）とか 積ん局（つんきょく；パイル；pile）とか。下層局（lower game）とか。呼び方を分けずに game と呼ぶか？ あるいは 問（fight；ファイト） とか。ボーリングのフレーム（frame）は野球のイニング（inning）と同じ。数列なら 項（term；ターム）。すごろくのマスは Square。あるいは単に 回（time）と呼ぶか。リーグの第３回戦の第２ピリオドとか。第何段？　数詞としてでかい。１コマ（frame）とするか。それだったら１タイム（刻；time）ぐらいが分かりやすいか？ 数詞だけの問題か？ じゃあ回（time）でいいか。----> time は step * time = span で使ってるので、どちらかというとステップの方が適している。 step は結局 point の言い換えなので、数詞は１点、２点……となる。回数という意味では time で合ってる。 ---> time にした
* [ ] 勝ち点はＡさんとＢさんが持っているものであって、表番と裏番が持っていることに意味はないのでは？


```
        # 引き分けを１局と数えると、シリーズの中で点数が足らず、決着が付かず、シリーズ全体としての引き分けが増えるので、対応が必要です
        #
        # # # NOTE ルールとして、引き分けを廃止することはできるか？ ----> 両者の実力が等しく、先手後手の有利も等しいとき、真の結果は引き分けがふさわしい。引き分けを消すことはできない
        # # #
        # # # NOTE その場合、先手勝利でいいのでは？ ----> 引き分け率１０％のとき、先手にしろ後手にしろ、そっちの勝率が５％上がってしまった。［目標の点数］を２倍にしてもだいたい同じ
        # # # NOTE 点数が引き分けということは、［上限対局数］を全部引き分けだったということです。引き分けが先手勝ちとか、後手勝ちと決めてしまうと、対局数が１のとき、影響がもろに出てしまう
        # # # NOTE 点数が引き分けのとき、最後に勝った方の勝ちとすればどうなる？ ----> 先手の方が勝つ機会が多いのでは？
        # # # NOTE 引き分けは［両者得点］にしたらどうか？ ----> step を足すのは裏番に有利すぎる。１点を足すのは数学的に意味がない。
        # # # NOTE 引き分けは［両者得点］にし、かつ、引き分けが奇数回なら後手勝ち、偶数回なら先手勝ちにしたらどうか？ ----> 対局数が１のときの影響がでかい
        # # # NOTE 引き分けは、［表勝ち１つの点数］が小さい表番の方に大きく響く？
        # # # NOTE 引き分けは減らせるが、ゼロにはできない、という感じ
        # NOTE タイブレークは、［将棋の引分け率］が上がってきたとき調整が困難。当然、引き分け率が上がるほど裏有利になる


#
#   NOTE 手番を交代する場合、［最大ｎ本勝負］は、（Ａさんの［表だけでの反復実施数］－１）＋（Ａさんの［裏だけでの反復実施数］－１）＋（Ｂさんの［表だけでの反復実施数］－１）＋（Ｂさんの［裏だけでの反復実施数］－１）＋１ になる
#


        #   交互に手番を替えるか、変えないかに関わらず、先手と後手の重要さは p で決まっている。
        #
        #   ［表勝ちだけでの対局数］も、
        #   ［裏勝ちだけでの対局数］数も、 p で決まっている。
        #
        #   ひとまず、リーチしている状況を考えてみよう。
        #
        #   'Ｘ' を、Ａさん（またはＢさん）の［表勝ちだけでの対局数］、
        #   'ｘ' を、Ａさん（またはＢさん）の［裏勝ちだけでの対局数］とする。
        #
        #   リーチしている状況は下の式のようになる。
        #
        #       ２（Ｘ－１）＋２（ｘー１）
        #
        #   ここに、点数の最小単位である　ｘ　を足して、
        #
        #       ２（Ｘ－１）＋２（ｘー１）＋ｘ
        #
        #   としたものが、［上限対局数］だ。
        #
        #
        #   仮に、Ｘ＝１、ｘ＝１　を式に入れてみる。
        #
        #       ２（１－１）＋２（１ー１）＋１　＝　１
        #
        #   対局数は１と分かる。
        #
        #
        #   ・　Ｘ＝１、ｘ＝１ ----> 上限対局数　１
        #   ・　Ｘ＝２、ｘ＝１ ----> 上限対局数　３
        #   ・　Ｘ＝３、ｘ＝１ ----> 上限対局数　５
        #   ・　Ｘ＝３、ｘ＝２ ----> 上限対局数　７
        #   ・　Ｘ＝４、ｘ＝１ ----> 上限対局数　７
        #   ・　Ｘ＝４、ｘ＝２ ----> 上限対局数　９
        #   ・　Ｘ＝４、ｘ＝３ ----> 上限対局数１１
        #
        #   上限対局数は奇数になるようだ。
        #
        #
        #   'Ａ' を、Ａさんの先手一本、'ａ' を、Ａさんの後手一本、
        #   'Ｂ' を、Ｂさんの先手一本、'ｂ' を、Ｂさんの後手一本とする。
        #
        #
        #   Ｘ＝１、ｘ＝１　上限対局数が１のケースの全パターンを見てみよう
        #
        #   (1) Ａ （先） ----> Ａさんの勝ち
        #   (2) ｂ （後） ----> Ｂさんの勝ち
        #
        #   これだと、Ｂさんは後手しか持てなくて厳しそうだ。 p=0.5 ぐらいの、五分五分ということか？
        #
        #
        #   Ｘ＝２、ｘ＝１　上限対局数が３のケースの全パターンを見てみよう
        #
        #                                           通分 先手は 1 点、後手は 2 点
        #                                           ----------------------------
        #   (1) ＡＢＡ（先先先） ----> Ａさんの勝ち     Ａさん 2 点、Ｂさん 1 点
        #   (2) ＡＢｂ（先先後） ----> Ｂさんの勝ち     Ａさん 1 点、Ｂさん 3 点
        #   (3) Ａａ　（先後　） ----> Ａさんの勝ち     Ａさん 3 点
        #   (4) ｂ　　（後　　） ----> Ｂさんの勝ち     Ｂさん 2 点
        #
        #   Ａさんは先手２回で勝てるのに対し、Ｂさんは後手を含めないと勝てない。
        #
        #   NOTE なんか先手のＡさんが有利なような気がするが、コイン投げ試行をしてみると、印象とはべつに成績としてバランスはとれているようだ？
        #
        #   思考：
        #       以下、偶数対局毎に手番を交代するとしたときの、Ｘ＝２、ｘ＝１　３本勝負のケースの全パターン
        #       
        #       (1) ＡＢＢ（先先先） ----> Ｂさんの勝ち
        #       (2) ＡＢａ（先先後） ----> Ａさんの勝ち
        #       (3) Ａａ　（先後　） ----> Ａさんの勝ち
        #       (4) ｂ　　（後　　） ----> Ｂさんの勝ち
        #       
        #       Ｂさんは先手２回で勝てるのに対し、Ａさんは後手を含めないと勝てない。
        #   
        #   
        #   期待勝利機会という考え方。先手一本も後手一本も 0.5。
        #   後手が２回回ってくるのも、２局１セットで考えれば普通。
        #   先手が先にＡさんに回ってきて、そこで２局１セットでないのが不満感？
        #   第３局で終わりにせず、第４局の消化試合までやるべき？ そしたら引き分けが生まれるのでは？ 引き分けにする権利？
        #
        #   NOTE ［先後固定制］と［先後交互制］で、引き分けにならないかどうかは、変わるだろうか？
        #
        #   FIXME 合ってるか、あとで確認
        #


#   * Ａさんが勝つために必要な［表勝ちだけでの対局数］
#   * Ａさんが勝つために必要な［裏勝ちだけでの対局数］
#   * Ａさんが勝つために必要な［表裏の回数の合算］
#   * Ｂさんが勝つために必要な［表勝ちだけでの対局数］
#   * Ｂさんが勝つために必要な［裏勝ちだけでの対局数］
#   * Ｂさんが勝つために必要な［表裏の回数の合算］
```
