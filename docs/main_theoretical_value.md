# イカサマコイン均等化理論

きふわらべ王国では、出土する金属の材質が悪く、表と裏の出る確率が異なるコインしか造ることができなかった。  
有能な国民は、表の出る確率を小数点第３位までの精度で測ることができたが、このようなコイン（国民からはイカサマコインと呼ばれた）を投げて表と裏のどちらが出るかといった遊びを行うことは諦めていた。  
そこで、きふわらべ王国の数学大臣はイカサマコインを使っても、まるで表と裏が均等に出たかのように計算できる方法を次のように示した  

もし表の出る確率が７割なら、コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
表が７回出たところで投げるのを止め表が出たことにし、  
裏が３回出たところで投げるのを止め裏が出たことにする  
　（きふわらべ王の天秤法　施行）  

国民からは、最大で９回投げるのがツラいと不満が出た  

数学大臣は次の方法を追加することを、きふわらべ王に提案した  

前の話しの続き。７を３で割って余りを四捨五入すれば２が求まる。  
コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が２回出たところで投げるのを止め表が出たことにする  
　（きふわらべ王の天秤法の正規化と丸め　草案）

きふわらべ王は、余り（１／３）はどこに行ったと数学大臣を非難した  

数学大臣は修正した次の方法を、きふわらべ王に提案した  

前の話しの続き。７を３で割って余りを切り捨てれば２が求まる。  
コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が２回出たところで投げるのを止め表が出たことにする。  
切り捨てた余りである１／３は持ち越す。  
そして３対局目には余りが集まって１を満たす。これを閏（うるう）対局と呼ぶことにする。  
閏対局では、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が３回出たところで投げるのを止め表が出たことにする。  
持ち越している余りから１を減ずる。  
　（きふわらべ王の天秤法の正規化と丸めと閏　施行）  

きふわらべ王は、閏対局で表を選ぶことになる者が不憫だと難色を示した  
数学大臣は、閏対局で表を選ぶことになる者がばらけられるように運営でカバーしろ、価値観の違い、と言った


## 説明１　コイン

コインには表と裏がある  

コインの表が出る確率を p と書くとする。  
コインの裏が出る確率は 1 - p となる

例：  

```
p     = 0.7
1 - p = 0.3
```


## 説明２　イカサマコイン

コインを投げて、  
表と裏の出る確率が同じとき　均等なコイン、  
表と裏の出る確率が同じでないとき　イカサマコイン
と呼ぶことにする  

```
p =  0.5    … 均等なコインの確率
p != 0.5    … イカサマコインの確率。 "!=" はノットイコールを表す
```

本書では主にイカサマコインを取り扱う


## 説明３  確率の整数化

確率の小数部が消えるほど 10^n を掛けると、整数になる

```
d = 10^n * p
```

例：  

```
n = 10
p =  0.7
d =  7
```


## データ

```
先手勝率0.50  先手の勝ちの価値1.0000  後手の勝ちの価値 1.0000  四捨五入 1
先手勝率0.51  先手の勝ちの価値0.9608  後手の勝ちの価値 1.0408  四捨五入 1
先手勝率0.52  先手の勝ちの価値0.9231  後手の勝ちの価値 1.0833  四捨五入 1
先手勝率0.53  先手の勝ちの価値0.8868  後手の勝ちの価値 1.1277  四捨五入 1
先手勝率0.54  先手の勝ちの価値0.8519  後手の勝ちの価値 1.1739  四捨五入 1
先手勝率0.55  先手の勝ちの価値0.8182  後手の勝ちの価値 1.2222  四捨五入 1
先手勝率0.56  先手の勝ちの価値0.7857  後手の勝ちの価値 1.2727  四捨五入 1
先手勝率0.57  先手の勝ちの価値0.7544  後手の勝ちの価値 1.3256  四捨五入 1
先手勝率0.58  先手の勝ちの価値0.7241  後手の勝ちの価値 1.3810  四捨五入 1
先手勝率0.59  先手の勝ちの価値0.6949  後手の勝ちの価値 1.4390  四捨五入 1
先手勝率0.60  先手の勝ちの価値0.6667  後手の勝ちの価値 1.5000  四捨五入 1
先手勝率0.61  先手の勝ちの価値0.6393  後手の勝ちの価値 1.5641  四捨五入 2
先手勝率0.62  先手の勝ちの価値0.6129  後手の勝ちの価値 1.6316  四捨五入 2
先手勝率0.63  先手の勝ちの価値0.5873  後手の勝ちの価値 1.7027  四捨五入 2
先手勝率0.64  先手の勝ちの価値0.5625  後手の勝ちの価値 1.7778  四捨五入 2
先手勝率0.65  先手の勝ちの価値0.5385  後手の勝ちの価値 1.8571  四捨五入 2
先手勝率0.66  先手の勝ちの価値0.5152  後手の勝ちの価値 1.9412  四捨五入 2
先手勝率0.67  先手の勝ちの価値0.4925  後手の勝ちの価値 2.0303  四捨五入 2
先手勝率0.68  先手の勝ちの価値0.4706  後手の勝ちの価値 2.1250  四捨五入 2
先手勝率0.69  先手の勝ちの価値0.4493  後手の勝ちの価値 2.2258  四捨五入 2
先手勝率0.70  先手の勝ちの価値0.4286  後手の勝ちの価値 2.3333  四捨五入 2
先手勝率0.71  先手の勝ちの価値0.4085  後手の勝ちの価値 2.4483  四捨五入 2
先手勝率0.72  先手の勝ちの価値0.3889  後手の勝ちの価値 2.5714  四捨五入 3
先手勝率0.73  先手の勝ちの価値0.3699  後手の勝ちの価値 2.7037  四捨五入 3
先手勝率0.74  先手の勝ちの価値0.3514  後手の勝ちの価値 2.8462  四捨五入 3
先手勝率0.75  先手の勝ちの価値0.3333  後手の勝ちの価値 3.0000  四捨五入 3
先手勝率0.76  先手の勝ちの価値0.3158  後手の勝ちの価値 3.1667  四捨五入 3
先手勝率0.77  先手の勝ちの価値0.2987  後手の勝ちの価値 3.3478  四捨五入 3
先手勝率0.78  先手の勝ちの価値0.2821  後手の勝ちの価値 3.5455  四捨五入 4
先手勝率0.79  先手の勝ちの価値0.2658  後手の勝ちの価値 3.7619  四捨五入 4
先手勝率0.80  先手の勝ちの価値0.2500  後手の勝ちの価値 4.0000  四捨五入 4
先手勝率0.81  先手の勝ちの価値0.2346  後手の勝ちの価値 4.2632  四捨五入 4
先手勝率0.82  先手の勝ちの価値0.2195  後手の勝ちの価値 4.5556  四捨五入 5
先手勝率0.83  先手の勝ちの価値0.2048  後手の勝ちの価値 4.8824  四捨五入 5
先手勝率0.84  先手の勝ちの価値0.1905  後手の勝ちの価値 5.2500  四捨五入 5
先手勝率0.85  先手の勝ちの価値0.1765  後手の勝ちの価値 5.6667  四捨五入 6
先手勝率0.86  先手の勝ちの価値0.1628  後手の勝ちの価値 6.1429  四捨五入 6
先手勝率0.87  先手の勝ちの価値0.1494  後手の勝ちの価値 6.6923  四捨五入 7
先手勝率0.88  先手の勝ちの価値0.1364  後手の勝ちの価値 7.3333  四捨五入 7
先手勝率0.89  先手の勝ちの価値0.1236  後手の勝ちの価値 8.0909  四捨五入 8
先手勝率0.90  先手の勝ちの価値0.1111  後手の勝ちの価値 9.0000  四捨五入 9
先手勝率0.91  先手の勝ちの価値0.0989  後手の勝ちの価値10.1111  四捨五入10
先手勝率0.92  先手の勝ちの価値0.0870  後手の勝ちの価値11.5000  四捨五入12
先手勝率0.93  先手の勝ちの価値0.0753  後手の勝ちの価値13.2857  四捨五入13
先手勝率0.94  先手の勝ちの価値0.0638  後手の勝ちの価値15.6667  四捨五入16
先手勝率0.95  先手の勝ちの価値0.0526  後手の勝ちの価値19.0000  四捨五入19
先手勝率0.96  先手の勝ちの価値0.0417  後手の勝ちの価値24.0000  四捨五入24
先手勝率0.97  先手の勝ちの価値0.0309  後手の勝ちの価値32.3333  四捨五入32
先手勝率0.98  先手の勝ちの価値0.0204  後手の勝ちの価値49.0000  四捨五入49
先手勝率0.99  先手の勝ちの価値0.0101  後手の勝ちの価値99.0000  四捨五入99
```

上記のデータから下記  

```
先手勝率0.50 ～ 0.60  先手の　１本先取／後手の１本先取制
先手勝率0.61 ～ 0.71  先手の　２本先取／後手の１本先取制
先手勝率0.72 ～ 0.77  先手の　３本先取／後手の１本先取制
先手勝率0.78 ～ 0.81  先手の　４本先取／後手の１本先取制
先手勝率0.82 ～ 0.84  先手の　５本先取／後手の１本先取制
先手勝率0.85 ～ 0.86  先手の　６本先取／後手の１本先取制
先手勝率0.87 ～ 0.88  先手の　７本先取／後手の１本先取制
先手勝率0.89          先手の　８本先取／後手の１本先取制
先手勝率0.90          先手の　９本先取／後手の１本先取制
先手勝率0.91          先手の１０本先取／後手の１本先取制
先手勝率0.92          先手の１２本先取／後手の１本先取制
先手勝率0.93          先手の１３本先取／後手の１本先取制
先手勝率0.94          先手の１６本先取／後手の１本先取制
先手勝率0.95          先手の１９本先取／後手の１本先取制
先手勝率0.96          先手の２４本先取／後手の１本先取制
先手勝率0.97          先手の３２本先取／後手の１本先取制
先手勝率0.98          先手の４９本先取／後手の１本先取制
先手勝率0.99          先手の９９本先取／後手の１本先取制
```

先手の先取数を分子、後手の先取数を分母と捉えれば、比は細かくすることは可能（分子、分母が大きくなる）  

先手勝率 0.7 の場合、理論値は　先手の ７／３ 先取、後手の１本先取　だから、約分して  
先手の７本先取、後手の３本先取となる  
