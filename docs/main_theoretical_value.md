# イカサマコイン均等化理論

わらべ島の先住民たちは、コインを投げて表と裏のどちらが出るかを当てる遊び（コイントス）を続けていた。  
そして　きふわらべ王国が建国されると、島から出土する金属の材質が悪くなり、表と裏の出る確率が異なるコインしか造ることができなくなった。  
熱心な国民は、表の出る確率を小数点第３位までの精度で測ることができたが、このような材質の悪いコイン（先住民からはイカサマコインと呼ばれた）でコイントスすることは諦めていた。  
そこで、きふわらべ王国の数学大臣はイカサマコインを使っても、まるで表と裏が均等に出たかのように計算できる方法を次のように示した  

もし表の出る確率が７割なら、コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
表が７回出たところで投げるのを止め表が出たことにし、  
裏が３回出たところで投げるのを止め裏が出たことにする  
　（きふわらべ王の天秤法　施行）  

国民からは、最大で９回投げるのがツラいと不満が出た  

数学大臣は次の方法を追加することを、きふわらべ王に提案した  

前の話しの続き。７を３で割って余りを四捨五入すれば２が求まる。  
コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が２回出たところで投げるのを止め表が出たことにする  
　（きふわらべ王の天秤法の比と丸め　草案）

きふわらべ王は、余り（１／３）はどこに行ったと数学大臣を非難した  

数学大臣は修正した次の方法を、きふわらべ王に提案した  

前の話しの続き。７を３で割って余りを切り捨てれば２が求まる。  
コインを１回ずつ投げて表裏が出るのを確認する単純作業をするものとし、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が２回出たところで投げるのを止め表が出たことにする。  
切り捨てた余りである１／３は次に持ち越す。  
そして３対局目には余りが集まって１を満たす。これを閏（うるう）対局と呼ぶことにする。  
閏対局では、  
裏が１回出たところで投げるのを止め裏が出たことにし、  
表が３回出たところで投げるのを止め表が出たことにする。  
持ち越している余りから１を減ずる。残りの余りがあれば、次に持ち越す  
　（きふわらべ王の天秤法の比と閏　施行）  

きふわらべ王は、閏対局で表を選ぶことになる者が不憫だと難色を示した  
数学大臣は、閏対局で表を選ぶことになる者がばらけられるように運営でカバーしろ、価値観の違い、と言った


## 説明１　コイン

コインには表と裏がある  

コインの表が出る確率を p と書くとする。  
コインの裏が出る確率は 1 - p となる

例：  

```
p     = 0.7
1 - p = 0.3
```


## 説明２　イカサマコイン

コインを投げて、  
表と裏の出る確率が同じとき　均等なコイン、  
表と裏の出る確率が同じでないとき　イカサマコイン
と呼ぶことにする  

```
p =  0.5    … 均等なコインの確率
p != 0.5    … イカサマコインの確率。 "!=" はノットイコールを表す
```

本書では主にイカサマコインを取り扱う


## 説明３  確率の整数化

確率の小数部が消えるほど 10^n を掛けると、整数になる

```
d = 10^n * p
```

例：  

```
n = 10
p =  0.7
d =  7
```


## データ

👇 閏対局では、先手はいつもより１本多く取る必要があります  

```
先手勝率0.50  先後勝率整数比　 5： 5  先手の 1本先取制  先手余り 0  
先手勝率0.51  先後勝率整数比　51：49  先手の 1本先取制  先手余り 2  余り解消の周期53.0000  閏対局[25][74]  （繰り返し）
先手勝率0.52  先後勝率整数比　52：48  先手の 1本先取制  先手余り 4  余り解消の周期56.0000  閏対局[12]  （繰り返し）
先手勝率0.53  先後勝率整数比　53：47  先手の 1本先取制  先手余り 6  余り解消の周期59.0000  閏対局[ 8][18][34][58][105]  （繰り返し）
先手勝率0.54  先後勝率整数比　54：46  先手の 1本先取制  先手余り 8  余り解消の周期62.0000  閏対局[ 6][14]  （繰り返し）
先手勝率0.55  先後勝率整数比　55：45  先手の 1本先取制  先手余り10  余り解消の周期65.0000  閏対局[ 5][14]  （繰り返し）
先手勝率0.56  先後勝率整数比　56：44  先手の 1本先取制  先手余り12  余り解消の周期68.0000  閏対局[ 4][10]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.61  先後勝率整数比　61：39  先手の 2本先取制  先手余り22  余り解消の周期41.5000  閏対局[ 2][ 5][ 9][48]  （繰り返し）
先手勝率0.62  先後勝率整数比　62：38  先手の 2本先取制  先手余り24  余り解消の周期43.0000  閏対局[ 2][ 5][12][31]  （繰り返し）
先手勝率0.63  先後勝率整数比　63：37  先手の 2本先取制  先手余り26  余り解消の周期44.5000  閏対局[ 2][ 6][11][17]  （繰り返し）
先手勝率0.64  先後勝率整数比　64：36  先手の 2本先取制  先手余り28  余り解消の周期46.0000  閏対局[ 2][ 7]  （繰り返し）
先手勝率0.65  先後勝率整数比　65：35  先手の 2本先取制  先手余り30  余り解消の周期47.5000  閏対局[ 2][ 9]  （繰り返し）
先手勝率0.66  先後勝率整数比　66：34  先手の 2本先取制  先手余り32  余り解消の周期49.0000  閏対局[ 2][19]  （繰り返し）
先手勝率0.67  先後勝率整数比　67：33  先手の 2本先取制  先手余り 1  余り解消の周期34.0000  閏対局[33]  （繰り返し）
先手勝率0.68  先後勝率整数比　68：32  先手の 2本先取制  先手余り 4  余り解消の周期36.0000  閏対局[ 8]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.61  先後勝率整数比　61：39  先手の 2本先取制  先手余り22  余り解消の周期41.5000  閏対局[ 2][ 5][ 9][48]  （繰り返し）
先手勝率0.62  先後勝率整数比　62：38  先手の 2本先取制  先手余り24  余り解消の周期43.0000  閏対局[ 2][ 5][12][31]  （繰り返し）
先手勝率0.63  先後勝率整数比　63：37  先手の 2本先取制  先手余り26  余り解消の周期44.5000  閏対局[ 2][ 6][11][17]  （繰り返し）
先手勝率0.64  先後勝率整数比　64：36  先手の 2本先取制  先手余り28  余り解消の周期46.0000  閏対局[ 2][ 7]  （繰り返し）
先手勝率0.65  先後勝率整数比　65：35  先手の 2本先取制  先手余り30  余り解消の周期47.5000  閏対局[ 2][ 9]  （繰り返し）
先手勝率0.66  先後勝率整数比　66：34  先手の 2本先取制  先手余り32  余り解消の周期49.0000  閏対局[ 2][19]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.61  先後勝率整数比　61：39  先手の 2本先取制  先手余り22  余り解消の周期41.5000  閏対局[ 2][ 5][ 9][48]  （繰り返し）
先手勝率0.62  先後勝率整数比　62：38  先手の 2本先取制  先手余り24  余り解消の周期43.0000  閏対局[ 2][ 5][12][31]  （繰り返し）
先手勝率0.63  先後勝率整数比　63：37  先手の 2本先取制  先手余り26  余り解消の周期44.5000  閏対局[ 2][ 6][11][17]  （繰り返し）
先手勝率0.64  先後勝率整数比　64：36  先手の 2本先取制  先手余り28  余り解消の周期46.0000  閏対局[ 2][ 7]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.61  先後勝率整数比　61：39  先手の 2本先取制  先手余り22  余り解消の周期41.5000  閏対局[ 2][ 5][ 9][48]  （繰り返し）
先手勝率0.62  先後勝率整数比　62：38  先手の 2本先取制  先手余り24  余り解消の周期43.0000  閏対局[ 2][ 5][12][31]  （繰り返し）
先手勝率0.63  先後勝率整数比　63：37  先手の 2本先取制  先手余り26  余り解消の周期44.5000  閏対局[ 2][ 6][11][17]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.57  先後勝率整数比　57：43  先手の 1本先取制  先手余り14  余り解消の周期71.0000  閏対局[ 4][47]  （繰り返し）
先手勝率0.58  先後勝率整数比　58：42  先手の 1本先取制  先手余り16  余り解消の周期74.0000  閏対局[ 3][ 8][14][35]  （繰り返し）
先手勝率0.59  先後勝率整数比　59：41  先手の 1本先取制  先手余り18  余り解消の周期77.0000  閏対局[ 3][12][23][37][58][99]  （繰り返し）
先手勝率0.60  先後勝率整数比　 6： 4  先手の 2本先取制  先手余り 2  余り解消の周期 4.0000  閏対局[ 2]  （繰り返し）
先手勝率0.61  先後勝率整数比　61：39  先手の 2本先取制  先手余り22  余り解消の周期41.5000  閏対局[ 2][ 5][ 9][48]  （繰り返し）
先手勝率0.62  先後勝率整数比　62：38  先手の 2本先取制  先手余り24  余り解消の周期43.0000  閏対局[ 2][ 5][12][31]  （繰り返し）
先手勝率0.63  先後勝率整数比　63：37  先手の 2本先取制  先手余り26  余り解消の周期44.5000  閏対局[ 2][ 6][11][17]  （繰り返し）
先手勝率0.64  先後勝率整数比　64：36  先手の 2本先取制  先手余り28  余り解消の周期46.0000  閏対局[ 2][ 7]  （繰り返し）
先手勝率0.65  先後勝率整数比　65：35  先手の 2本先取制  先手余り30  余り解消の周期47.5000  閏対局[ 2][ 9]  （繰り返し）
先手勝率0.66  先後勝率整数比　66：34  先手の 2本先取制  先手余り32  余り解消の周期49.0000  閏対局[ 2][19]  （繰り返し）
先手勝率0.67  先後勝率整数比　67：33  先手の 2本先取制  先手余り 1  余り解消の周期34.0000  閏対局[33]  （繰り返し）
先手勝率0.68  先後勝率整数比　68：32  先手の 2本先取制  先手余り 4  余り解消の周期36.0000  閏対局[ 8]  （繰り返し）
先手勝率0.69  先後勝率整数比　69：31  先手の 2本先取制  先手余り 7  余り解消の周期38.0000  閏対局[ 5][11][22]  （繰り返し）
先手勝率0.70  先後勝率整数比　 7： 3  先手の 2本先取制  先手余り 1  余り解消の周期 4.0000  閏対局[ 3]  （繰り返し）
先手勝率0.71  先後勝率整数比　71：29  先手の 2本先取制  先手余り13  余り解消の周期42.0000  閏対局[ 3][ 8][14][43]  （繰り返し）
先手勝率0.72  先後勝率整数比　72：28  先手の 3本先取制  先手余り16  余り解消の周期29.3333  閏対局[ 2][ 6]  （繰り返し）
先手勝率0.73  先後勝率整数比　73：27  先手の 3本先取制  先手余り19  余り解消の周期30.6667  閏対局[ 2][ 4][ 7][34]  （繰り返し）
先手勝率0.74  先後勝率整数比　74：26  先手の 3本先取制  先手余り22  余り解消の周期32.0000  閏対局[ 2][ 6][19]  （繰り返し）
先手勝率0.75  先後勝率整数比　75：25  先手の 3本先取制  先手余り 0
先手勝率0.76  先後勝率整数比　76：24  先手の 3本先取制  先手余り 4  余り解消の周期26.6667  閏対局[ 6]  （繰り返し）
先手勝率0.77  先後勝率整数比　77：23  先手の 3本先取制  先手余り 8  余り解消の周期28.3333  閏対局[ 3][ 8][20][43]  （繰り返し）
先手勝率0.78  先後勝率整数比　78：22  先手の 4本先取制  先手余り12  余り解消の周期22.5000  閏対局[ 2][ 6]  （繰り返し）
先手勝率0.79  先後勝率整数比　79：21  先手の 4本先取制  先手余り16  余り解消の周期23.7500  閏対局[ 2][ 4][10][17][38]  （繰り返し）
先手勝率0.80  先後勝率整数比　 8： 2  先手の 4本先取制  先手余り 0
先手勝率0.81  先後勝率整数比　81：19  先手の 4本先取制  先手余り 5  余り解消の周期21.5000  閏対局[ 4][23]  （繰り返し）
先手勝率0.82  先後勝率整数比　82：18  先手の 5本先取制  先手余り10  余り解消の周期18.4000  閏対局[ 2][11]  （繰り返し）
先手勝率0.83  先後勝率整数比　83：17  先手の 5本先取制  先手余り15  余り解消の周期19.6000  閏対局[ 2][ 5][11][20][37]  （繰り返し）
先手勝率0.84  先後勝率整数比　84：16  先手の 5本先取制  先手余り 4  余り解消の周期17.6000  閏対局[ 4]  （繰り返し）
先手勝率0.85  先後勝率整数比　85：15  先手の 6本先取制  先手余り10  余り解消の周期15.8333  閏対局[ 2][ 5]  （繰り返し）
先手勝率0.86  先後勝率整数比　86：14  先手の 6本先取制  先手余り 2  余り解消の周期14.6667  閏対局[ 7]  （繰り返し）
先手勝率0.87  先後勝率整数比　87：13  先手の 7本先取制  先手余り 9  余り解消の周期13.7143  閏対局[ 2][ 5][10]  （繰り返し）
先手勝率0.88  先後勝率整数比　88：12  先手の 7本先取制  先手余り 4  余り解消の周期13.1429  閏対局[ 3]  （繰り返し）
先手勝率0.89  先後勝率整数比　89：11  先手の 8本先取制  先手余り 1  余り解消の周期11.2500  閏対局[11]  （繰り返し）
先手勝率0.90  先後勝率整数比　 9： 1  先手の 9本先取制  先手余り 0
先手勝率0.91  先後勝率整数比　91： 9  先手の10本先取制  先手余り 1  余り解消の周期 9.2000  閏対局[ 9]  （繰り返し）
先手勝率0.92  先後勝率整数比　92： 8  先手の12本先取制  先手余り 4  余り解消の周期 8.0000  閏対局[ 2]  （繰り返し）
先手勝率0.93  先後勝率整数比　93： 7  先手の13本先取制  先手余り 2  余り解消の周期 7.3077  閏対局[ 4][11]  （繰り返し）
先手勝率0.94  先後勝率整数比　94： 6  先手の16本先取制  先手余り 4  余り解消の周期 6.1250  閏対局[ 2][ 5]  （繰り返し）
先手勝率0.95  先後勝率整数比　95： 5  先手の19本先取制  先手余り 0
先手勝率0.96  先後勝率整数比　96： 4  先手の24本先取制  先手余り 0
先手勝率0.97  先後勝率整数比　97： 3  先手の32本先取制  先手余り 1  余り解消の周期 3.0625  閏対局[ 3]  （繰り返し）
先手勝率0.98  先後勝率整数比　98： 2  先手の49本先取制  先手余り 0
先手勝率0.99  先後勝率整数比　99： 1  先手の99本先取制  先手余り 0
```
